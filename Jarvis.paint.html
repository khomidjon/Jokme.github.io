<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JARVIS AI Interface</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            overflow: hidden;
            color: #00d4ff;
        }
        
        #intro-screen {
            position: fixed; 
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 9999; 
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 1;
            transition: opacity 1s ease-out;
        }
        .intro-content {
            display: flex;
            align-items: center;
            gap: 30px;
        }
        #edge-logo {
            width: 120px;
            height: auto;
            animation: 
                spinIn 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards,
                glowBlue 2s infinite alternate;
        }
        #intro-text {
            font-size: 60px;
            font-weight: bold;
            color: #00d2ff;
            text-shadow: 0 0 15px #00d2ff, 0 0 25px #00d2ff;
            opacity: 0;
            transform: translateX(-100px);
            animation: 
                slideInText 1s forwards 1.2s,
                flickerText 0.5s infinite alternate 2.2s;
        }
        @keyframes spinIn {
            0% { transform: rotate(0deg) scale(0); opacity: 0; }
            50% { transform: rotate(360deg) scale(1.2); opacity: 1; }
            100% { transform: rotate(720deg) scale(1); opacity: 1; }
        }
        @keyframes glowBlue {
            0% { filter: drop-shadow(0 0 5px #00d2ff); }
            100% { filter: drop-shadow(0 0 15px #00d2ff) drop-shadow(0 0 25px #00d2ff); }
        }
        @keyframes slideInText {
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes flickerText {
            0% { opacity: 0.8; text-shadow: 0 0 10px #00d2ff; }
            100% { opacity: 1; text-shadow: 0 0 20px #00d2ff, 0 0 30px #00d2ff; }
        }
        
        #video { display: none; }
        
        #hand-canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 15;
        }
        
        #hud-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 10;
        }
        
        #status-panel {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 20, 40, 0.8);
            border: 2px solid #00d4ff;
            padding: 15px 30px;
            text-align: center;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 30px rgba(0, 212, 255, 0.5); }
            50% { box-shadow: 0 0 50px rgba(0, 212, 255, 0.8); }
        }
        
        #jarvis-text {
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 3px;
            text-shadow: 0 0 10px #00d4ff;
        }
        
        #mode-text {
            font-size: 14px;
            margin-top: 5px;
            color: #4df3ff;
        }
        
        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00d4ff, transparent);
            box-shadow: 0 0 20px #00d4ff;
            animation: scan 3s linear infinite;
        }
        
        @keyframes scan {
            from { top: 0; }
            to { top: 100%; }
        }
        
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 5;
        }
        
        #color-palette {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(0, 20, 40, 0.9);
            padding: 15px;
            border: 2px solid #00d4ff;
            border-radius: 10px;
            pointer-events: all;
            z-index: 20;
        }
        
        .color-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #fff;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .color-btn:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }
        
        .color-btn.active {
            border: 3px solid #00d4ff;
            box-shadow: 0 0 25px #00d4ff;
            transform: scale(1.15);
        }
        
        #notification {
            position: absolute;
            top: 150px;
            right: 30px;
            background: rgba(0, 212, 255, 0.2);
            border-left: 4px solid #00d4ff;
            padding: 15px;
            max-width: 300px;
            opacity: 0;
            transform: translateX(400px);
            transition: all 0.5s;
        }
        
        #notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .grid-line {
            position: absolute;
            background: rgba(0, 212, 255, 0.1);
        }
        
        .grid-h { width: 100%; height: 1px; }
        .grid-v { height: 100%; width: 1px; }
        
        .fingertip-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 25;
            transition: all 0.1s;
        }
        
        #controls {
            position: absolute;
            top: 150px;
            left: 30px;
            background: rgba(0, 20, 40, 0.9);
            border: 1px solid #00d4ff;
            padding: 15px;
            border-radius: 10px;
            pointer-events: all;
            z-index: 20;
        }
        
        .control-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid #00d4ff;
            color: #00d4ff;
            cursor: pointer;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .control-btn:hover {
            background: rgba(0, 212, 255, 0.4);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.6);
        }
        .glass-back-btn {
            position: fixed;
            top: 25px;
            left: 25px;
            padding: 12px 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.9);
            font-family: 'Courier New', monospace;
            font-size: 16px;
            z-index: 10001; /* Hamma narsadan, hatto intro-dan ham tepada turadi */
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px) saturate(150%);
            -webkit-backdrop-filter: blur(15px) saturate(150%);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    
        .glass-back-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
            transform: scale(1.05) translateX(5px);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
        }
    
        .chevron {
            font-size: 24px;
            line-height: 0;
            color: #00e1ff;
        }
    </style>

</head>
<body>
    <a href="dashboard.html" class="glass-back-btn">
        <span class="chevron">â€¹</span> Orqaga
    </a>
    <div id="intro-screen">
        <div class="intro-content">
            <img src="https://upload.wikimedia.org/wikipedia/commons/9/98/Microsoft_Edge_logo_%282019%29.svg" alt="Microsoft Edge Logo" id="edge-logo">
            <h1 id="intro-text">Homidjon Coding...</h1>
        </div>
    </div>

    <video id="video"></video>
    <canvas id="hand-canvas"></canvas>
    <canvas id="particle-canvas"></canvas>
    <div class="fingertip-dot" id="fingertip"></div>
    
    <div id="hud-overlay">
        <div class="scan-line"></div>
        
        <div id="status-panel">
            <div id="jarvis-text">JARVIS AI SYSTEM</div>
            <div id="mode-text">INITIALIZING...</div>
        </div>
        
        <div id="notification"></div>
    </div>
    
    <div id="controls">
        <button class="control-btn" onclick="undoLastAction()">â†¶ UNDO</button>
        <button class="control-btn" onclick="clearAllObjects()">âœ• CLEAR ALL</button>
        <button class="control-btn" onclick="saveScene()">ðŸ’¾ SAVE</button>
    </div>
    
    <div id="color-palette"></div>

    <script>
        if (!localStorage.getItem('atom_user')) {
            window.location.href = 'index.html'; 
        }
        var introDuration = 5000;
        setTimeout(function() {
            var intro = document.getElementById('intro-screen');
            intro.style.opacity = '0';
            setTimeout(function() {
                intro.style.display = 'none';
            }, 1000);
        }, introDuration);

        var videoEl = document.getElementById('video');
        var handCanv = document.getElementById('hand-canvas');
        var handContext = handCanv.getContext('2d');
        var partCanv = document.getElementById('particle-canvas');
        var partContext = partCanv.getContext('2d');
        var statusMode = document.getElementById('mode-text');
        var notifyBox = document.getElementById('notification');
        var tipDot = document.getElementById('fingertip');
        var paletteDiv = document.getElementById('color-palette');
        
        handCanv.width = window.innerWidth;
        handCanv.height = window.innerHeight;
        partCanv.width = window.innerWidth;
        partCanv.height = window.innerHeight;
        
        var colorArray = [
            '#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF',
            '#4B0082', '#9400D3', '#FF1493', '#00CED1', '#FFD700',
            '#FF69B4', '#8B4513', '#2E8B57', '#DC143C', '#00BFFF',
            '#FF6347', '#9370DB', '#3CB371', '#FF4500', '#1E90FF'
        ];
        
        var activeColor = '#FF0000';
        var activeColorRGB = parseHexColor(activeColor);
        var eraserActive = false;
        
        for (var idx = 0; idx < colorArray.length; idx++) {
            var colorButton = document.createElement('div');
            colorButton.className = 'color-btn';
            colorButton.style.backgroundColor = colorArray[idx];
            if (idx === 0) colorButton.classList.add('active');
            colorButton.setAttribute('data-color', colorArray[idx]);
            colorButton.onclick = function() { 
                switchColor(this.getAttribute('data-color'), this, false); 
            };
            paletteDiv.appendChild(colorButton);
        }
        
        var eraserButton = document.createElement('div');
        eraserButton.className = 'color-btn';
        eraserButton.innerHTML = 'ðŸ—‘ï¸';
        eraserButton.style.backgroundColor = '#333';
        eraserButton.style.display = 'flex';
        eraserButton.style.alignItems = 'center';
        eraserButton.style.justifyContent = 'center';
        eraserButton.style.fontSize = '24px';
        eraserButton.onclick = function() { 
            switchColor('#FF0000', eraserButton, true); 
        };
        paletteDiv.appendChild(eraserButton);
        
        function switchColor(clr, btn, erase) {
            var allButtons = document.querySelectorAll('.color-btn');
            for (var b = 0; b < allButtons.length; b++) {
                allButtons[b].classList.remove('active');
            }
            btn.classList.add('active');
            eraserActive = erase;
            if (!erase) {
                activeColor = clr;
                activeColorRGB = parseHexColor(clr);
            }
        }
        
        function parseHexColor(hexCode) {
            var match = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hexCode);
            return match ? {
                r: parseInt(match[1], 16),
                g: parseInt(match[2], 16),
                b: parseInt(match[3], 16)
            } : {r: 255, g: 0, b: 0};
        }
        
        for (var gridIdx = 0; gridIdx < 10; gridIdx++) {
            var horzLine = document.createElement('div');
            horzLine.className = 'grid-line grid-h';
            horzLine.style.top = (gridIdx * 10) + '%';
            document.body.appendChild(horzLine);
            
            var vertLine = document.createElement('div');
            vertLine.className = 'grid-line grid-v';
            vertLine.style.left = (gridIdx * 10) + '%';
            document.body.appendChild(vertLine);
        }
        
        var particleList = [];
        
        function ParticleObj(xPos, yPos, colorData) {
            this.x = xPos;
            this.y = yPos;
            this.vx = (Math.random() - 0.5) * 2;
            this.vy = (Math.random() - 0.5) * 2;
            this.lifetime = 100;
            this.sz = Math.random() * 3 + 1;
            this.clr = colorData || {r: 0, g: 212, b: 255};
        }
        
        ParticleObj.prototype.step = function() {
            this.x += this.vx;
            this.y += this.vy;
            this.lifetime -= 2;
        };
        
        ParticleObj.prototype.drawParticle = function() {
            var alpha = this.lifetime / 100;
            partContext.fillStyle = 'rgba(' + this.clr.r + ', ' + this.clr.g + ', ' + this.clr.b + ', ' + alpha + ')';
            partContext.fillRect(this.x, this.y, this.sz, this.sz);
            partContext.shadowBlur = 10;
            partContext.shadowColor = activeColor;
        };
        
        function updateParticles() {
            partContext.clearRect(0, 0, partCanv.width, partCanv.height);
            
            for (var pIdx = particleList.length - 1; pIdx >= 0; pIdx--) {
                particleList[pIdx].step();
                particleList[pIdx].drawParticle();
                
                if (particleList[pIdx].lifetime <= 0) {
                    particleList.splice(pIdx, 1);
                }
            }
            
            requestAnimationFrame(updateParticles);
        }
        updateParticles();
        
        var mainScene = new THREE.Scene();
        var mainCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        var mainRenderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        mainRenderer.setSize(window.innerWidth, window.innerHeight);
        document.body.insertBefore(mainRenderer.domElement, document.body.firstChild);
        
        var ambLight = new THREE.AmbientLight(0x404040, 2);
        mainScene.add(ambLight);
        
        var pointLightSrc = new THREE.PointLight(0x00d4ff, 2, 100);
        pointLightSrc.position.set(0, 10, 10);
        mainScene.add(pointLightSrc);
        
        mainCamera.position.z = 20;
        
        var sketchPoints = [];
        var sketchColors = [];
        var currentStrokeMesh = null;
        var finishedObjects = [];
        var heldObject = null;
        var lastNotifyTimestamp = 0;
        var historyStack = [];
        
        function displayNotify(msg) {
            var nowTime = Date.now();
            if (nowTime - lastNotifyTimestamp < 2000) return;
            lastNotifyTimestamp = nowTime;
            
            notifyBox.textContent = msg;
            notifyBox.classList.add('show');
            
            setTimeout(function() {
                notifyBox.classList.remove('show');
            }, 2000);
        }
        
        function clearAllObjects() {
            while (finishedObjects.length > 0) {
                var obj = finishedObjects.pop();
                mainScene.remove(obj);
            }
            if (currentStrokeMesh) {
                mainScene.remove(currentStrokeMesh);
                currentStrokeMesh = null;
            }
            sketchPoints = [];
            sketchColors = [];
            historyStack = [];
            displayNotify('All objects cleared');
        }
        
        function undoLastAction() {
            if (finishedObjects.length > 0) {
                var lastObj = finishedObjects.pop();
                mainScene.remove(lastObj);
                historyStack.push(lastObj);
                displayNotify('Undo successful');
            }
        }
        
        function saveScene() {
            displayNotify('Save feature coming soon!');
        }
        
        function handleHandResults(results) {
            handCanv.width = window.innerWidth;
            handCanv.height = window.innerHeight;
            handContext.clearRect(0, 0, handCanv.width, handCanv.height);
            
            handContext.save();
            handContext.translate(handCanv.width, 0);
            handContext.scale(-1, 1);
            
            if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                var handLandmarks = results.multiHandLandmarks[0];
                
                var idxTip = handLandmarks[8];
                var idxBase = handLandmarks[5];
                var thmTip = handLandmarks[4];
                var midTip = handLandmarks[12];
                var rngTip = handLandmarks[16];
                var pnkTip = handLandmarks[20];
                
                var scrX = (1 - idxTip.x) * window.innerWidth;
                var scrY = idxTip.y * window.innerHeight;
                
                var worldX = (scrX / window.innerWidth - 0.5) * 30;
                var worldY = -(scrY / window.innerHeight - 0.5) * 22;
                var worldPos = new THREE.Vector3(worldX, worldY, 0);
                
                var pinchDist = Math.hypot(idxTip.x - thmTip.x, idxTip.y - thmTip.y);
                var isPinch = pinchDist < 0.11;
                var idxUp = idxTip.y < idxBase.y - 0.05;
                var midDown = midTip.y > handLandmarks[10].y;
                var rngDown = rngTip.y > handLandmarks[14].y;
                var pnkDown = pnkTip.y > handLandmarks[18].y;
                var isPoint = idxUp && midDown && rngDown && pnkDown && !isPinch;
                
                var allUp = idxTip.y < idxBase.y && midTip.y < handLandmarks[10].y && 
                            rngTip.y < handLandmarks[14].y && pnkTip.y < handLandmarks[18].y;
                var isOpen = allUp && !isPinch;
                
                var skelClr = '#00d4ff';
                var dotClr = '#ffffff';
                var dotSz = '15px';
                
                if (isPoint) {
                    statusMode.textContent = 'DRAWING MODE ACTIVE';
                    skelClr = '#FFA500';
                    dotClr = '#FFA500';
                    dotSz = '20px';
                    
                    sketchPoints.push(worldPos.clone());
                    sketchColors.push(activeColor);
                    
                    var partX = (1 - idxTip.x) * partCanv.width;
                    var partY = idxTip.y * partCanv.height;
                    for (var pCnt = 0; pCnt < 3; pCnt++) {
                        particleList.push(new ParticleObj(partX, partY, activeColorRGB));
                    }
                    
                    if (sketchPoints.length > 2) {
                        updateSmoothStroke();
                    }
                } else if (isOpen && sketchPoints.length > 5) {
                    statusMode.textContent = 'RENDERING 3D OBJECT...';
                    displayNotify('Sir, object rendered successfully');
                    buildSolidObject();
                    skelClr = '#00FF00';
                    dotClr = '#00FF00';
                } else if (isPinch) {
                    if (eraserActive) {
                        statusMode.textContent = 'ERASER MODE - DELETE OBJECT';
                        skelClr = '#FF0000';
                        dotClr = '#FF0000';
                        dotSz = '22px';
                        
                        if (!heldObject) {
                            for (var objIdx = finishedObjects.length - 1; objIdx >= 0; objIdx--) {
                                if (worldPos.distanceTo(finishedObjects[objIdx].position) < 4) {
                                    mainScene.remove(finishedObjects[objIdx]);
                                    finishedObjects.splice(objIdx, 1);
                                    displayNotify('Object deleted');
                                    
                                    for (var burstCnt = 0; burstCnt < 30; burstCnt++) {
                                        var randX = Math.random() * partCanv.width;
                                        var randY = Math.random() * partCanv.height;
                                        particleList.push(new ParticleObj(randX, randY, {r: 255, g: 0, b: 0}));
                                    }
                                    break;
                                }
                            }
                        }
                    } else {
                        statusMode.textContent = 'MANIPULATION MODE';
                        skelClr = '#00FF00';
                        dotClr = '#00FF00';
                        dotSz = '18px';
                        
                        if (!heldObject) {
                            for (var searchIdx = 0; searchIdx < finishedObjects.length; searchIdx++) {
                                if (worldPos.distanceTo(finishedObjects[searchIdx].position) < 4) {
                                    heldObject = finishedObjects[searchIdx];
                                    displayNotify('Object locked');
                                    break;
                                }
                            }
                        } else {
                            heldObject.position.lerp(worldPos, 0.25);
                            heldObject.rotation.y += 0.02;
                        }
                    }
                } else {
                    statusMode.textContent = 'STANDBY MODE';
                    dotClr = '#ffffff';
                    heldObject = null;
                }
                
                tipDot.style.left = scrX + 'px';
                tipDot.style.top = scrY + 'px';
                tipDot.style.width = dotSz;
                tipDot.style.height = dotSz;
                tipDot.style.backgroundColor = dotClr;
                tipDot.style.boxShadow = '0 0 20px ' + dotClr + ', 0 0 40px ' + dotClr;
                tipDot.style.display = 'block';
                
                drawConnectors(handContext, handLandmarks, HAND_CONNECTIONS, {color: skelClr, lineWidth: 3});
                drawLandmarks(handContext, handLandmarks, {color: skelClr, radius: 3, fillColor: skelClr});
                
            } else {
                statusMode.textContent = 'AWAITING HAND INPUT';
                tipDot.style.display = 'none';
            }
            
            handContext.restore();
        }
        
        function updateSmoothStroke() {
            if (currentStrokeMesh) {
                mainScene.remove(currentStrokeMesh);
            }
            
            var curvePath = new THREE.CatmullRomCurve3(sketchPoints);
            var tubeGeo = new THREE.TubeGeometry(curvePath, sketchPoints.length * 2, 0.08, 8, false);
            var tubeMat = new THREE.MeshPhongMaterial({ 
                color: activeColor,
                emissive: activeColor,
                emissiveIntensity: 0.5
            });
            currentStrokeMesh = new THREE.Mesh(tubeGeo, tubeMat);
            mainScene.add(currentStrokeMesh);
        }
        
        function buildSolidObject() {
            if (sketchPoints.length < 5) return;
            
            var outlineShape = new THREE.Shape();
            outlineShape.moveTo(sketchPoints[0].x, sketchPoints[0].y);
            for (var ptIdx = 0; ptIdx < sketchPoints.length; ptIdx++) {
                outlineShape.lineTo(sketchPoints[ptIdx].x, sketchPoints[ptIdx].y);
            }
            outlineShape.closePath();
            
            var solidGeo = new THREE.ExtrudeGeometry(outlineShape, { 
                depth: 2, 
                bevelEnabled: true, 
                bevelThickness: 0.3, 
                bevelSize: 0.2,
                bevelSegments: 5
            });
            
            var midColor = sketchColors[Math.floor(sketchColors.length / 2)] || activeColor;
            
            var solidMat = new THREE.MeshPhongMaterial({ 
                color: midColor,
                emissive: midColor,
                emissiveIntensity: 0.3,
                transparent: true,
                opacity: 0.9,
                shininess: 100
            });
            
            var solidMesh = new THREE.Mesh(solidGeo, solidMat);
            
            solidGeo.computeBoundingBox();
            var centerPt = new THREE.Vector3();
            solidGeo.boundingBox.getCenter(centerPt);
            solidGeo.translate(-centerPt.x, -centerPt.y, -centerPt.z);
            solidMesh.position.copy(centerPt);
            
            mainScene.add(solidMesh);
            finishedObjects.push(solidMesh);
            
            for (var explIdx = 0; explIdx < 50; explIdx++) {
                var explX = Math.random() * partCanv.width;
                var explY = Math.random() * partCanv.height;
                particleList.push(new ParticleObj(explX, explY, parseHexColor(midColor)));
            }
            
            if (currentStrokeMesh) {
                mainScene.remove(currentStrokeMesh);
                currentStrokeMesh = null;
            }
            
            sketchPoints = [];
            sketchColors = [];
        }
        
        var handDetector = new Hands({
            locateFile: function(fileName) { 
                return 'https://cdn.jsdelivr.net/npm/@mediapipe/hands/' + fileName; 
            }
        });
        
        handDetector.setOptions({
            maxNumHands: 1,
            modelComplexity: 1,
            minDetectionConfidence: 0.7,
            minTrackingConfidence: 0.7
        });
        
        handDetector.onResults(handleHandResults);
        
        var cameraSource = new Camera(videoEl, {
            onFrame: function() { 
                handDetector.send({ image: videoEl }); 
            },
            width: 1280,
            height: 720
        });
        
        setTimeout(function() {
            cameraSource.start();
            setTimeout(function() {
                statusMode.textContent = 'SYSTEM ONLINE';
                displayNotify('Welcome, Sir. All systems operational.');
            }, 500);
        }, 6100);
        
        function renderScene() {
            requestAnimationFrame(renderScene);
            
            for (var rotIdx = 0; rotIdx < finishedObjects.length; rotIdx++) {
                finishedObjects[rotIdx].rotation.y += 0.005;
            }
            
            mainRenderer.render(mainScene, mainCamera);
        }
        renderScene();
        
        window.addEventListener('resize', function() {
            mainCamera.aspect = window.innerWidth / window.innerHeight;
            mainCamera.updateProjectionMatrix();
            mainRenderer.setSize(window.innerWidth, window.innerHeight);
            handCanv.width = window.innerWidth;
            handCanv.height = window.innerHeight;
            partCanv.width = window.innerWidth;
            partCanv.height = window.innerHeight;
        });
    </script>
</body>
</html>
